+++
title="é˜¿é‡Œäº‘æ—¥å¿—å¹³å°ä½¿ç”¨"
description="é˜¿é‡Œäº‘æ—¥å¿—å¹³å°ä½¿ç”¨"
tags=["work"]
categories=["tool"]
date="2022-03-24T21:55:00+08:00" 
url="Use-of-Alibaba-Cloud-Logging-Platform.html"
summary="é˜¿é‡Œäº‘æ—¥å¿—å¹³å°ä½¿ç”¨"
toc=true
+++


```
ğŸ’¡  æ ¹æ® é—å¿˜æ›²çº¿ï¼šå¦‚æœæ²¡æœ‰è®°å½•å’Œå›é¡¾ï¼Œ6å¤©åä¾¿ä¼šå¿˜è®°75%çš„å†…å®¹
      è¯»ä¹¦ç¬”è®°æ­£æ˜¯å¸®åŠ©ä½ è®°å½•å’Œå›é¡¾çš„å·¥å…·ï¼Œä¸å¿…æ‹˜æ³¥äºå½¢å¼ï¼Œå…¶æ ¸å¿ƒæ˜¯ï¼šè®°å½•ã€ç¿»çœ‹ã€æ€è€ƒ
```

## 1ã€å…³é”®ç‚¹è¯´æ˜

- æ¨¡ç³ŠåŒ¹é…æ”¯æŒ*ï¼Œä½†æ˜¯ä¸æ”¯æŒå‰æ¨¡ç³ŠåŒ¹é…
- not è¡¨ç¤ºé
- å¯ä»¥æ”¯æŒå¤šæ–‡æ¡£åŒ¹é…ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„è½¬ä¹‰
- | åé¢å†™çš„çš„ç±»ä¼¼sql
- SELECT json_extract(json, '$.store.book');  ä»ä¸€ä¸ªJSONå¯¹è±¡ä¸­æå–å€¼
- json_parse(string)  æŠŠå­—ç¬¦ä¸²è½¬åŒ–æˆJSONç±»å‹



## 2ã€å…³é”®æ—¥å¿—æŸ¥è¯¢

- å…³é”®å‡½æ•° https://help.aliyun.com/document_detail/86661.html?spm=a2c4g.11186623.6.835.4b1a209bfdsjdD
- jsonå‡½æ•° https://help.aliyun.com/document_detail/63454.html?spm=a2c4g.11186623.6.822.3675209bNQeXZE
- ç¯æ¯”å‡½æ•° https://help.aliyun.com/document_detail/86661.html?spm=a2c4g.11186623.6.845.2d1522fddGPrnq






## 3ã€æå–æ—¥å¿—ä¸­çš„æŸä¸€ä¸ªå­—æ®µ

```
ListenAccountIdRefreshedEvent.message" and ProjectName: smlvpc | select DISTINCT regexp_extract(Content, ',"ouid":"(\S+)","uuid":', 1)
```





## 4ã€é˜¶æ®µç»Ÿè®¡

```plain
* and url: createFlowOneStep and status=200 | select
  k,
  v
from(
    select
      map(array [0.5,0.9,0.99,0.999], p) as m
    from(
        select
          approx_percentile(duration, array [0.5,0.9,0.99,0.999]) as p
         FROM log
      )
  ),
  unnest(m) as t(k, v)
```
